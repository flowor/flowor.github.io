---
permalink: tree
---
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Simple Fractal Tree</title>
  </head>
  <style media="screen">
    html, body, canvas {
      padding: 0;
      margin: 0;
      overflow: hidden;
    }
  </style>
  <body>

<canvas id="canvas" width="640" height="480"></canvas>
<script>
angle = (Math.PI/4);
size = 100;


// angle = (Math.random()*5.49778714378214)+(Math.PI/4);
window.onload=function() {
  canvas = document.getElementById('canvas');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  ctx = canvas.getContext('2d');
  update();
  canvas.addEventListener('mousemove',function(e){
    update();
    angle = (2*Math.PI)-((2*Math.PI)*(e.clientX/canvas.width));
    size = (canvas.height/2)-(((canvas.height/2)-10)*(e.clientY/canvas.height));
  });
  canvas.addEventListener('touchmove',function(e){
    update();
    angle = (2*Math.PI)-((2*Math.PI)*(event.touches[0].pageX/canvas.width));
    size = (canvas.height/2)-(((canvas.height/2)-10)*(event.touches[0].pageY/canvas.height));
  });
  canvas.addEventListener('touchmove',function(e){
    update();
    angle = (2*Math.PI)-((2*Math.PI)*(event.touches[0].pageX/canvas.width));
    size = (canvas.height/2)-(((canvas.height/2)-10)*(event.touches[0].pageY/canvas.height));
  });
  window.addEventListener('resize',function(e){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    update();
  });
}

function update() {

  // Fill the canvas with a black background
  ctx.fillStyle = '#383F51';
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Write out the angle and size - top left corner
  ctx.fillStyle = 'white';
  ctx.fillText("Angle: "+angle,50,50);
  ctx.fillText("Size: "+size,50,65);

  // Save origin at 0,0 for background
  ctx.save();

  // Position the origin to the center bottom
  ctx.translate(canvas.width/2,canvas.height);
  ctx.strokeStyle = 'white';
  branch(size);

  // Restore origin to 0,0 so that the background can draw from 0,0
  ctx.restore();
}

function branch(s) {
  ctx.lineWidth = 1.5;
  ctx.save();

  // Basic function draws a line from bottom center to desired y-chord
  ctx.line(0,-s);

  // As long as the size is greater than the minimum
  if (s > 4) {
    // Move the origin to the end of the line
    ctx.translate(0,-s);

    // Right Branch
    ctx.save();
    ctx.rotate(angle);
    branch(s*0.6);

    // Left Branch
    ctx.restore();
    ctx.rotate(-angle);
    branch(s*0.6);
  }
  ctx.restore();
}

// Prototype line drawing from 0,0
CanvasRenderingContext2D.prototype.line = function(x, y) {
  this.beginPath();
  this.moveTo(0,0);
  this.lineTo(x,y);
  this.stroke();
}

</script>
</body>
</html>
